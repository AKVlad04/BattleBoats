<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <title>Battle Boats - LUPTƒÇ!</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* Stiluri specifice pentru pagina de luptƒÉ */
        .battle-container {
            display: flex;
            gap: 50px;
            justify-content: center;
            align-items: flex-start;
            flex-wrap: wrap;
            margin-top: 20px;
        }

        .player-section {
            text-align: center;
        }

        /* Grila adversarului trebuie sƒÉ arate cƒÉ po»õi trage */
        .enemy-board .grid-cell {
            cursor: crosshair; /* Cursor √Æn formƒÉ de »õintƒÉ */
        }

        .enemy-board .grid-cell:hover {
            background-color: #3498db; /* LumineazƒÉ la hover */
        }

        /* C√¢nd nu e r√¢ndul tƒÉu, grila inamicƒÉ e dezactivatƒÉ */
        .disabled-board {
            opacity: 0.5;
            pointer-events: none;
        }

        .status-log {
            margin-top: 20px;
            padding: 15px;
            background: #2c3e50;
            border: 1px solid #7f8c8d;
            border-radius: 5px;
            min-height: 50px;
            width: 80%;
            text-align: center;
            font-size: 1.2em;
            color: #f1c40f; /* Galben */
            font-weight: bold;
        }

        h3 { color: #e67e22; margin-bottom: 10px; }

        /* Hit »ôi Miss - culori */
        .hit { background-color: #e74c3c !important; } /* Ro»ôu */
        .miss { background-color: #95a5a6 !important; } /* Gri */

        /* Butoane finale */
        #end-actions {
            margin: 18px auto 0 auto;
            display: none;
            width: fit-content;
            max-width: none;
            padding: 0;
            border-radius: 0;
            background: transparent;
            border: none;
            box-shadow: none;

            display: none;
            justify-content: center;
            align-items: center;
            gap: 14px;
        }

        #end-actions button {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            line-height: 1;
            padding: 0 18px;
            height: 46px;
        }

        /* Banner final (WIN/LOSE) */
        #end-banner {
            display: none;
            margin: 18px auto 10px auto;
            width: 100%;
            max-width: 620px;
            padding: 16px 18px;
            border-radius: 14px;
            text-align: center;
            font-weight: 900;
            letter-spacing: 0.5px;
            box-shadow: 0 12px 30px rgba(0,0,0,0.35);
            border: 1px solid rgba(236, 240, 241, 0.14);
            font-size: 1.45em;
        }
        #end-banner.win {
            background: linear-gradient(135deg, rgba(39, 174, 96, 0.35), rgba(46, 204, 113, 0.18));
            color: #d5ffea;
        }
        #end-banner.lose {
            background: linear-gradient(135deg, rgba(231, 76, 60, 0.35), rgba(192, 57, 43, 0.18));
            color: #ffe1de;
        }

        /* Pulse pe butonul principal */
        @keyframes pulse {
            0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(46, 204, 113, 0.45); }
            70% { transform: scale(1.02); box-shadow: 0 0 0 12px rgba(46, 204, 113, 0); }
            100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(46, 204, 113, 0); }
        }
        #end-actions .btn-save.primary {
            animation: pulse 1.6s ease-out infinite;
        }

        /* Animatii micro */
        @keyframes hitFlash {
            0% { filter: brightness(1.0); }
            40% { filter: brightness(1.8); }
            100% { filter: brightness(1.0); }
        }
        .hit-flash {
            animation: hitFlash 260ms ease-in-out;
        }

        @keyframes missShake {
            0% { transform: translateX(0); }
            20% { transform: translateX(-3px); }
            40% { transform: translateX(3px); }
            60% { transform: translateX(-2px); }
            80% { transform: translateX(2px); }
            100% { transform: translateX(0); }
        }
        .miss-shake {
            animation: missShake 240ms ease-in-out;
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(8px); }
            to { opacity: 1; transform: translateY(0); }
        }
        #end-banner {
            animation: fadeInUp 260ms ease-out;
        }

        /* RespectƒÉ setarea de accesibilitate */
        @media (prefers-reduced-motion: reduce) {
            .hit-flash, .miss-shake, #end-actions .btn-save.primary, #end-banner {
                animation: none !important;
            }
        }

        /* Chat (UI-only, implementare simplƒÉ prin polling) */
        .chat {
            margin: 14px auto 0 auto;
            width: 100%;
            max-width: 520px;
            background: rgba(44, 62, 80, 0.55);
            border: 1px solid rgba(236,240,241,0.12);
            border-radius: 12px;
            padding: 12px;
        }
        .chat-log {
            max-height: 160px;
            overflow: auto;
            text-align: left;
            padding: 10px;
            border-radius: 10px;
            background: rgba(0,0,0,0.18);
            border: 1px solid rgba(236,240,241,0.10);
            font-size: 0.95em;
        }
        .chat-row {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        .chat-row input {
            margin: 0;
        }
        .chat-row button {
            width: auto;
            min-width: 140px;
            margin-top: 0;
        }

        @media (max-width: 520px) {
            #end-actions {
                flex-direction: column;
                max-width: 360px;
            }
            #end-actions button {
                width: 100%;
                min-width: 0;
            }
        }

        /* Header aliniere (ambele coloane) */
        .board-title {
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-bottom: 8px;
        }

        /* mic indicator (punct) de turƒÉ */
        .turn-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            border: 1px solid rgba(236,240,241,0.25);
            background: rgba(149, 165, 166, 0.9); /* neutral */
            box-shadow: 0 0 0 3px rgba(0,0,0,0.15);
            display: inline-block;
        }
        .turn-dot.yours { background: rgba(46, 204, 113, 0.95); box-shadow: 0 0 0 3px rgba(46, 204, 113, 0.18); }
        .turn-dot.theirs { background: rgba(231, 76, 60, 0.95); box-shadow: 0 0 0 3px rgba(231, 76, 60, 0.18); }
        .turn-dot.waiting { background: rgba(241, 196, 15, 0.95); box-shadow: 0 0 0 3px rgba(241, 196, 15, 0.18); }

        /* scoatem badge-ul text (nu-l mai folosim) */
        .turn-badge { display: none !important; }

        /* End banner + actions polish */
    </style>
</head>
<body>

<div class="game-container" style="max-width: 1000px;">
    <div class="header">
        <h2>‚öîÔ∏è ZONA DE RƒÇZBOI ‚öîÔ∏è</h2>
    </div>

    <div class="status-log" id="turn-indicator">
        Se conecteazƒÉ la server...
    </div>

    <div id="end-banner" class="win">
        üèÜ VICTORIE!
    </div>

    <div class="battle-container">
        <div class="player-section">
            <div class="board-title">
                <h3 style="margin:0;">Flota Ta</h3>
            </div>
            <div id="my-board" class="board"></div>
        </div>

        <div class="player-section">
            <div class="board-title">
                <h3 style="margin:0;">Radar Inamic</h3>
                <span class="turn-dot" id="turn-dot"></span>
            </div>
            <div id="enemy-board" class="board enemy-board"></div>
        </div>
    </div>

    <div id="end-actions">
        <button onclick="window.location.href='menu.html'" class="btn-back">‚¨Ö Back to Menu</button>
        <button onclick="playAgain()" class="btn-save primary">üîÅ Play Again</button>
    </div>
</div>

<script src="config.js"></script>
<script type="module">
  import { startBattlePage } from './battle-firebase.js';
  startBattlePage();
</script>

</body>
</html>
